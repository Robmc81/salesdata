-- Create table for BPS Accounts
CREATE TABLE bps_accounts (
    id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    urn_name text,
    tech_client text,
    client_type_overwrite text,
    cov_name_1h25 text,
    cov_client_type_1h25 text,
    cov_client_sub_type_1h25 text,
    brnch_dscr_1h25 text,
    sub_brnch_dscr_1h25 text,
    sub_ind_dscr text,
    ind_dscr text,
    sector text,
    firmo_le_emp_cnt_number_of_employees numeric,
    it_spend_estimate text,
    company_size text,
    prmry_city_name text,
    prmry_st_prov_name text,
    total_ibm_rev_2024 text,
    total_ibm_rev_2023 text,
    total_ibm_rev_2022 text,
    api_connect text,
    app_connect_enterprise text,
    app_connect_professional text,
    aspera text,
    clearcase_and_clearquest text,
    cloud_pak_system text,
    cloud_pak_for_aiops text,
    cloud_pak_for_applications text,
    cloud_pak_for_integration text,
    cloud_private text,
    datapower_appliances text,
    datapower_operations_dashboard text,
    datapower_datapower_software_editions text,
    devops_automation text,
    devops_heritage text,
    event_automation text,
    flexera text,
    humio text,
    mobile_foundation text,
    mq text,
    mq_advanced text,
    mq_appliances text,
    ns1 text,
    observability_with_instana text,
    operations_insights text,
    pure_application text,
    rational_analysis_design_construction text,
    runtimes text,
    sevone text,
    turbonomic_arm text,
    urbancode text,
    websphere_application_server text,
    websphere_application_server_family_edition text,
    websphere_application_server_network_deployment text,
    websphere_automation text,
    websphere_extreme_scale text,
    websphere_hybrid_edition text,
    websphere_service_registry_repository text,
    workload_automation text,
    blueworks_live text,
    business_automation_open_edition text,
    capture text,
    cloud_pak_for_business_automation text,
    cloud_pak_for_data text,
    cloudera_hadoop text,
    cognos_analytics text,
    content_bacs text,
    content_cm8 text,
    content_cmod text,
    content_fncm text,
    content_ilg text,
    data_fabric_ecosystem_emerging text,
    data_integration_replication text,
    data_lineage_by_manta text,
    data_observability_by_databand text,
    database_ecosystem text,
    db2 text,
    db2_tools_for_z text,
    db2_for_cloud_pak_for_data text,
    db2_for_z text,
    decision_optimization text,
    embeddable_ai_libraries text,
    financial_transactions_payments_insights text,
    informix text,
    netezza text,
    oem_automation_anywhere text,
    openpages text,
    optim_master_data_management text,
    planning_analytics text,
    process_mining text,
    robotic_process_automation text,
    spectrum_high_performance_computing text,
    spss_modeler text,
    spss_statistics text,
    watson_apis text,
    watson_assistant text,
    watson_discovery text,
    watson_subscription_expert_lab text,
    watson_code_assistant text,
    watsonx_ai text,
    watsonx_data text,
    watsonx_gov text,
    workflow_automation text,
    ibm_sw_installs text,
    top_data_ai_business_parter text,
    top_it_auto_app_mod_business_parter text,
    key_bp text,
    created_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL,
    updated_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL
);

-- Create updated_at trigger
CREATE TRIGGER set_updated_at
    BEFORE UPDATE ON bps_accounts
    FOR EACH ROW
    EXECUTE FUNCTION public.set_updated_at();

-- Create indexes for commonly queried fields
CREATE INDEX idx_bps_accounts_urn_name ON bps_accounts(urn_name);
CREATE INDEX idx_bps_accounts_tech_client ON bps_accounts(tech_client);
CREATE INDEX idx_bps_accounts_sector ON bps_accounts(sector);
CREATE INDEX idx_bps_accounts_prmry_city_name ON bps_accounts(prmry_city_name);
CREATE INDEX idx_bps_accounts_prmry_st_prov_name ON bps_accounts(prmry_st_prov_name);